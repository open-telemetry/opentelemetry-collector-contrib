receivers:
  otlp:
    protocols:
      grpc:
        endpoint: 0.0.0.0:4317
      http:
        endpoint: 0.0.0.0:4318

exporters:
  debug/default:
    verbosity: detailed
  debug/demo:
    verbosity: detailed
  debug/prod:
    verbosity: detailed

connectors:
  routing:
    default_pipelines: [traces/default]
    error_mode: ignore
    table:
      # This rule uses an unqualified path.
      # With context inference, 'attributes["service.name"]' should be interpreted as 'resource.attributes["service.name"]'
      - statement: route() where attributes["service.name"] == "demo-service"
        pipelines: [traces/demo]
      
      # This rule uses a qualified path.
      - statement: route() where resource.attributes["env"] == "production"
        pipelines: [traces/prod]

service:
  pipelines:
    traces/input:
      receivers: [otlp]
      exporters: [routing]
    
    traces/default:
      receivers: [routing]
      exporters: [debug/default]
    
    traces/demo:
      receivers: [routing]
      exporters: [debug/demo]
    
    traces/prod:
      receivers: [routing]
      exporters: [debug/prod]
