# The following specifies a resource configuration doing the changes on resource attributes:
# 1. Set "cloud.availability_zone" attributes with "zone-1" value ignoring existing values.
# 2. Copy "k8s-cluster" attribute value to "k8s.cluster.name" attribute, nothing happens if "k8s-cluster" not found.
# 3. Remove "redundant-attribute" attribute.
# There are many more attribute modification actions supported,
# check processor/attributesprocessor/testdata/config.yaml for reference.
resource:
  attributes:
  - key: cloud.availability_zone
    value: zone-1
    action: upsert
  - key: k8s.cluster.name
    from_attribute: k8s-cluster
    action: insert
  - key: redundant-attribute
    action: delete

# The following demonstrates using default_value to handle missing environment variables or attributes
resource/with_defaults:
  attributes:
  # Use default when environment variable is not set
  - key: deployment.environment
    value: "${DEPLOYMENT_ENV}"
    default_value: "development"
    action: upsert
  # Use default when source attribute doesn't exist
  - key: service.namespace
    from_attribute: namespace
    default_value: "default"
    action: insert
  # Use default when context value is not available
  - key: cloud.region
    from_context: "metadata.region"
    default_value: "us-east-1"
    action: upsert

# The following specifies an invalid resource configuration, it has to have at least one action set in attributes field.
resource/empty:
