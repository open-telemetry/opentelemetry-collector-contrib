# Example configuration for MongoDB receiver with query sampling

receivers:
  mongodb:
    # Connection settings
    hosts:
      - endpoint: localhost:27017
    username: "admin"
    password: "password"
    timeout: 60s
    
    # Query sampling configuration  
    query_sampling:
      enabled: true
      collection_interval: 30s
      max_operations: 50
      include_databases:
        - "myapp"
        - "analytics"
      exclude_databases:
        - "admin"
        - "local"
        - "config"

processors:
  batch:

exporters:
  # Export metrics to OTLP
  otlp/metrics:
    endpoint: "http://localhost:4317"
    
  # Export query samples (logs) to OTLP  
  otlp/logs:
    endpoint: "http://localhost:4317"

service:
  pipelines:
    # Metrics pipeline
    metrics:
      receivers: [mongodb]
      processors: [batch]
      exporters: [otlp/metrics]
      
    # Logs pipeline for query samples
    logs:
      receivers: [mongodb]
      processors: [batch] 
      exporters: [otlp/logs]