# Example configuration for monitoring multiple Cisco devices
# This demonstrates the correct pattern: one receiver instance per device

receivers:
  # Device 1 - Cisco Switch 1
  ciscoosreceiver/device1:
    collection_interval: 30s
    initial_delay: 1s
    timeout: 45s
    
    devices:
      - device:
          host:
            ip: "192.168.1.1"
            port: 22
        auth:
          username: "admin"
          password: "password"
    
    scrapers:
      system:
        metrics:
          cisco.device.up:
            enabled: true
          cisco.collector.duration.seconds:
            enabled: true
      
      interfaces:
        metrics:
          cisco.interface.transmit.bytes:
            enabled: true
          cisco.interface.receive.bytes:
            enabled: true
          cisco.interface.up:
            enabled: true
          cisco.interface.receive.errors:
            enabled: true
          cisco.interface.transmit.errors:
            enabled: true

  # Device 2 - Cisco Switch 2
  ciscoosreceiver/device2:
    collection_interval: 30s
    initial_delay: 1s
    timeout: 45s
    
    devices:
      - device:
          host:
            ip: "192.168.1.2"
            port: 22
        auth:
          username: "admin"
          password: "password"
    
    scrapers:
      system:
        metrics:
          cisco.device.up:
            enabled: true
          cisco.collector.duration.seconds:
            enabled: true
      
      interfaces:
        metrics:
          cisco.interface.transmit.bytes:
            enabled: true
          cisco.interface.receive.bytes:
            enabled: true
          cisco.interface.up:
            enabled: true
          cisco.interface.receive.errors:
            enabled: true
          cisco.interface.transmit.errors:
            enabled: true

processors:
  batch:
    timeout: 10s
    send_batch_size: 1024
  
  resource:
    attributes:
      - key: deployment.environment
        value: "production"
        action: upsert
      - key: k8s.cluster.name
        value: "prod-cluster"
        action: upsert

exporters:
  debug:
    verbosity: detailed
  
  otlp:
    endpoint: "localhost:4317"
    tls:
      insecure: true

service:
  pipelines:
    metrics:
      # Both devices monitored in parallel
      receivers: [ciscoosreceiver/device1, ciscoosreceiver/device2]
      processors: [resource, batch]
      exporters: [debug, otlp]
  
  telemetry:
    logs:
      level: info
    metrics:
      level: none
