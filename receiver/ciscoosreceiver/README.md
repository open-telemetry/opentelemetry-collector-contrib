# Cisco OS Receiver

<!-- status autogenerated section -->
| Status        |           |
| ------------- |-----------|
| Stability     | [development]: metrics   |
| Distributions | [] |
| Issues        | [![Open issues](https://img.shields.io/github/issues-search/open-telemetry/opentelemetry-collector-contrib?query=is%3Aissue%20is%3Aopen%20label%3Areceiver%2Fciscoos%20&label=open&color=orange&logo=opentelemetry)](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues?q=is%3Aopen+is%3Aissue+label%3Areceiver%2Fciscoos) [![Closed issues](https://img.shields.io/github/issues-search/open-telemetry/opentelemetry-collector-contrib?query=is%3Aissue%20is%3Aclosed%20label%3Areceiver%2Fciscoos%20&label=closed&color=blue&logo=opentelemetry)](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues?q=is%3Aclosed+is%3Aissue+label%3Areceiver%2Fciscoos) |
| Code coverage | [![codecov](https://codecov.io/github/open-telemetry/opentelemetry-collector-contrib/graph/main/badge.svg?component=receiver_ciscoosreceiver)](https://app.codecov.io/gh/open-telemetry/opentelemetry-collector-contrib/tree/main/?components%5B0%5D=receiver_ciscoosreceiver&displayType=list) |
| [Code Owners](https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/CONTRIBUTING.md#becoming-a-code-owner)    | [@dmitryax](https://www.github.com/dmitryax) |

[development]: https://github.com/open-telemetry/opentelemetry-collector/blob/main/docs/component-stability.md#development
<!-- end autogenerated section -->

The Cisco OS Receiver collects metrics from Cisco network devices (NX-OS, IOS XE, IOS) via SSH connections. It provides device availability monitoring and interface statistics with native OpenTelemetry OTLP metrics generation.

**Key Features:**
- SSH-based metric collection (password or key authentication)
- Automatic OS detection (NX-OS, IOS XE, IOS)
- Persistent SSH connections with shared connection pool
- Per-metric enable/disable configuration
- Support for multiple devices via named receiver instances

## Configuration

The following settings are available:

| Setting | Type | Required | Description |
|---------|------|----------|-------------|
| `devices` | []DeviceConfig | Yes | List of Cisco devices to monitor (typically one per receiver instance) |
| `collection_interval` | duration | No | How often to collect metrics (default: 60s) |
| `initial_delay` | duration | No | Delay before first collection (default: 1s) |
| `timeout` | duration | No | SSH connection and command timeout (default: 30s) |
| `scrapers` | map | Yes | Scrapers to enable with per-metric configuration |

### Device Configuration

Each device is configured with the following nested structure:

| Setting | Type | Required | Description |
|---------|------|----------|-------------|
| `device.host.ip` | string | Yes | Device IP address |
| `device.host.port` | int | No | SSH port (default: 22) |
| `device.host.name` | string | No | Device hostname for identification |
| `auth.username` | string | Yes | SSH username for authentication |
| `auth.password` | string | No* | Password for authentication |
| `auth.key_file` | string | No* | Path to SSH private key file |

*Either `password` or `key_file` is required.

### Scrapers Configuration

The receiver supports two scrapers that can be configured independently:

| Scraper | Description | Metrics Collected |
|---------|-------------|-------------------|
| `system` | Device health and availability | `cisco.device.up`, `cisco.collector.duration.seconds` |
| `interfaces` | Interface statistics and status | `cisco.interface.receive.bytes`, `cisco.interface.transmit.bytes`, `cisco.interface.receive.errors`, `cisco.interface.transmit.errors`, `cisco.interface.receive.drops`, `cisco.interface.transmit.drops`, `cisco.interface.receive.multicast`, `cisco.interface.receive.broadcast`, `cisco.interface.up` |

Each scraper can be configured with metric-level enable/disable settings:

```yaml
scrapers:
  system:
    metrics:
      cisco.device.up:
        enabled: true
      cisco.collector.duration.seconds:
        enabled: true
  interfaces:
    metrics:
      cisco.interface.transmit.bytes:
        enabled: true
      cisco.interface.receive.bytes:
        enabled: true
      # ... other interface metrics
```

## Resource Attributes

The following resource attributes are added to all metrics:

| Attribute | Description | Example |
|-----------|-------------|---------|
| `target` | Device IP address | `192.168.1.1` |
| `name` | Interface name (interfaces scraper only) | `GigabitEthernet0/0/1` |
| `mac` | Interface MAC address (interfaces scraper only) | `aabb.ccdd.ee01` |
| `description` | Interface description (interfaces scraper only) | `Core uplink` |
| `speed` | Interface speed with units (interfaces scraper only) | `1 Gbps` |

## Example Configurations

### Single Device

```yaml
receivers:
  ciscoosreceiver:
    collection_interval: 30s
    initial_delay: 1s
    timeout: 45s
    devices:
      - device:
          host:
            ip: "192.168.1.1"
            port: 22
        auth:
          username: "admin"
          password: "password"
    scrapers:
      system:
      interfaces:

exporters:
  debug:
    verbosity: detailed

service:
  pipelines:
    metrics:
      receivers: [ciscoosreceiver]
      exporters: [debug]
```

### Multiple Devices (Recommended Pattern)

Create separate receiver instances for each device:

```yaml
receivers:
  # Device 1
  ciscoosreceiver/device1:
    collection_interval: 30s
    timeout: 45s
    devices:
      - device:
          host:
            ip: "192.168.1.1"
            port: 22
        auth:
          username: "admin"
          password: "password"
    scrapers:
      system:
      interfaces:

  # Device 2
  ciscoosreceiver/device2:
    collection_interval: 30s
    timeout: 45s
    devices:
      - device:
          host:
            ip: "192.168.1.2"
            port: 22
        auth:
          username: "admin"
          password: "password"
    scrapers:
      system:
      interfaces:

exporters:
  otlp:
    endpoint: "localhost:4317"

service:
  pipelines:
    metrics:
      receivers: [ciscoosreceiver/device1, ciscoosreceiver/device2]
      exporters: [otlp]
```

### With Per-Metric Configuration

```yaml
receivers:
  ciscoosreceiver:
    collection_interval: 30s
    timeout: 45s
    devices:
      - device:
          host:
            ip: "192.168.1.1"
            port: 22
        auth:
          username: "admin"
          password: "password"
    scrapers:
      system:
        metrics:
          cisco.device.up:
            enabled: true
          cisco.collector.duration.seconds:
            enabled: true
      interfaces:
        metrics:
          cisco.interface.transmit.bytes:
            enabled: true
          cisco.interface.receive.bytes:
            enabled: true
          cisco.interface.up:
            enabled: true
          cisco.interface.receive.errors:
            enabled: true
          cisco.interface.transmit.errors:
            enabled: true
          cisco.interface.receive.drops:
            enabled: false
          cisco.interface.transmit.drops:
            enabled: false

exporters:
  debug:

service:
  pipelines:
    metrics:
      receivers: [ciscoosreceiver]
      exporters: [debug]
```

## Supported Cisco Operating Systems

- **Cisco IOS XE** - Tested and supported
- **Cisco NX-OS** - Tested and supported  
- **Cisco IOS** - Tested and supported

The receiver automatically detects the OS type and uses appropriate commands for each platform.