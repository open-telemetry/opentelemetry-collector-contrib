receivers:
  # New Relic SQL Server Receiver
  newrelicsqlserverreceiver:
    
    module: github.com/open-telemetry/opentelemetry-collector-contrib/receiver/newrelicsqlserverreceiver
    
    status:
      class: receiver
      stability:
        alpha: [metrics]
      distributions: [contrib]
      codeowners:
        active: [newrelic-integrations-team]

    resource_attributes:
      sqlserver.database.name:
        description: The name of the SQL Server database.
        type: string
        enabled: true
      sqlserver.instance.name:
        description: The name of the SQL Server instance.
        type: string
        enabled: true
      server.address:
        description: The SQL Server hostname or IP address.
        type: string
        enabled: true
      server.port:
        description: The SQL Server port number.
        type: int
        enabled: true

    metrics:
      sqlserver.stats.connections:
        enabled: true
        description: Number of user connections to the SQL Server.
        unit: '{connections}'
        gauge:
          value_type: int
      sqlserver.stats.sql_compilations:
        enabled: true
        description: Number of SQL compilations per second.
        unit: '{compilations}/s'
        gauge:
          value_type: int
      sqlserver.stats.sql_recompilations:
        enabled: true
        description: Number of SQL re-compilations per second.
        unit: '{recompilations}/s'
        gauge:
          value_type: int
      sqlserver.buffer.checkpoint_pages:
        enabled: true
        description: Number of pages flushed by checkpoint operations per second.
        unit: '{pages}/s'
        gauge:
          value_type: int
      sqlserver.access.page_splits:
        enabled: true
        description: Number of page splits per second due to index page overflow.
        unit: '{page_splits}/s'
        gauge:
          value_type: int
      sqlserver.stats.deadlocks:
        enabled: true
        description: Number of deadlocks per second.
        unit: '{deadlocks}/s'
        gauge:
          value_type: int
      sqlserver.stats.user_errors:
        enabled: true
        description: Number of user errors per second.
        unit: '{errors}/s'
        gauge:
          value_type: int
      sqlserver.bufferpool.page_life_expectancy:
        enabled: true
        description: Time in milliseconds a page stays in the buffer pool without references.
        unit: 'ms'
        gauge:
          value_type: double
      sqlserver.instance.transactions:
        enabled: true
        description: Number of transactions per second.
        unit: '{transactions}/s'
        gauge:
          value_type: int
      sqlserver.query.blocked_sessions:
        enabled: true
        description: Number of blocked sessions waiting for resources.
        unit: '{sessions}'
        gauge:
          value_type: int
      sqlserver.query.slow_queries:
        enabled: true
        description: Number of slow queries above the configured threshold.
        unit: '{queries}'
        gauge:
          value_type: int

    tests:
      config:
        hostname: localhost
        port: 1433
        username: sa
        password: password123!
        enable_ssl: false
        timeout: 30
