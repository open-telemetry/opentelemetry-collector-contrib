# OpenTelemetry Collector configuration for New Relic SQL Server receiver testing
receivers:
  newrelicsqlserver:
    hostname: localhost
    port: "1433"
    username: sa
    password: ${SQLSERVER_PASSWORD}
    enable_ssl: false
    trust_server_certificate: true
    collection_interval: 10s
    timeout: 30s
    enable_buffer_metrics: true
    enable_database_reserve_metrics: true
    enable_disk_metrics_in_bytes: true
    enable_query_monitoring: true
    query_monitoring_response_time_threshold: 1
    query_monitoring_count_threshold: 20
    query_monitoring_fetch_interval: 15

processors:
  batch:

exporters:
  otlp:
    endpoint: http://localhost:4317
    tls:
      insecure: true
  
  # For debugging - outputs to console
  debug:
    verbosity: detailed

service:
  pipelines:
    metrics:
      receivers: [newrelicsqlserver]
      processors: [batch]
      exporters: [otlp, debug]

  telemetry:
    logs:
      level: debug
