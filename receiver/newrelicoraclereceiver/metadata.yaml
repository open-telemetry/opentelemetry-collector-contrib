type: newrelicoracledb

status:
  class: receiver
  stability:
    alpha: [metrics]
  distributions: [contrib]
  codeowners:
    active: [newrelic-team]

resource_attributes:
  newrelicoracledb.instance.name:
    description: The name of the Oracle instance that data is coming from.
    enabled: true
    type: string
  host.name:
    description: The host name of Oracle Server
    enabled: true
    type: string

attributes:
  newrelic.entity_name:
    description: New Relic entity name for the metric
    type: string
  tablespace.name:
    description: Name of the Oracle tablespace
    type: string
  instance.id:
    description: Oracle database instance ID
    type: string
  global.name:
    description: Oracle database global name
    type: string
  db.id:
    description: Oracle database ID
    type: string

metrics:
  newrelicoracledb.sessions.count:
    description: Total number of active Oracle database sessions
    enabled: true
    gauge:
      value_type: int
    unit: "{sessions}"
    attributes:
      - newrelic.entity_name

  newrelicoracledb.tablespace.space_consumed_bytes:
    description: Total bytes consumed by the tablespace
    enabled: true
    gauge:
      value_type: int
    unit: "By"
    attributes:
      - newrelic.entity_name
      - tablespace.name

  newrelicoracledb.tablespace.space_reserved_bytes:
    description: Total bytes reserved by the tablespace
    enabled: true
    gauge:
      value_type: int
    unit: "By"
    attributes:
      - newrelic.entity_name
      - tablespace.name

  newrelicoracledb.tablespace.space_used_percentage:
    description: Percentage of tablespace space currently used
    enabled: true
    gauge:
      value_type: int
    unit: "%"
    attributes:
      - newrelic.entity_name
      - tablespace.name

  newrelicoracledb.tablespace.is_offline:
    description: Whether the tablespace is offline (1) or online (0)
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - tablespace.name

  newrelicoracledb.tablespace.global_name:
    description: Global name information for tablespace
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - tablespace.name

  newrelicoracledb.tablespace.db_id:
    description: Database ID information for tablespace
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - tablespace.name

  newrelicoracledb.tablespace.offline_cdb_datafiles:
    description: Count of offline CDB datafiles by tablespace
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - tablespace.name

  newrelicoracledb.tablespace.offline_pdb_datafiles:
    description: Count of offline PDB datafiles by tablespace
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - tablespace.name

  newrelicoracledb.tablespace.pdb_non_write_mode:
    description: Count of PDB datafiles in non-write mode by tablespace
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - tablespace.name

  newrelicoracledb.locked_accounts:
    description: Count of locked user accounts in the database
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.disk.reads:
    description: Number of physical disk reads
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.disk.writes:
    description: Number of physical disk writes
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.disk.blocks_read:
    description: Number of physical blocks read from disk
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.disk.blocks_written:
    description: Number of physical blocks written to disk
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.disk.read_time_milliseconds:
    description: Time spent reading from disk in milliseconds
    enabled: true
    gauge:
      value_type: int
    unit: "ms"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.disk.write_time_milliseconds:
    description: Time spent writing to disk in milliseconds
    enabled: true
    gauge:
      value_type: int
    unit: "ms"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.memory.pga_in_use_bytes:
    description: Total PGA memory currently in use in bytes
    enabled: true
    gauge:
      value_type: int
    unit: "By"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.memory.pga_allocated_bytes:
    description: Total PGA memory allocated in bytes
    enabled: true
    gauge:
      value_type: int
    unit: "By"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.memory.pga_freeable_bytes:
    description: Total freeable PGA memory in bytes
    enabled: true
    gauge:
      value_type: int
    unit: "By"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.memory.pga_max_size_bytes:
    description: Global memory bound for PGA in bytes
    enabled: true
    gauge:
      value_type: int
    unit: "By"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.global_name:
    description: Oracle database global name information
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id
      - global.name

  newrelicoracledb.db_id:
    description: Oracle database ID information
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id
      - db.id

  newrelicoracledb.long_running_queries:
    description: Number of long running queries (active sessions running for more than 60 seconds)
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.memory.sga_uga_total_bytes:
    description: Total SGA UGA memory in bytes (session uga memory max)
    enabled: true
    gauge:
      value_type: int
    unit: "By"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.memory.sga_shared_pool_library_cache_sharable_bytes:
    description: SGA shared pool library cache sharable memory in bytes for statements with more than 5 executions
    enabled: true
    gauge:
      value_type: int
    unit: "By"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.memory.sga_shared_pool_library_cache_user_bytes:
    description: SGA shared pool library cache shareable memory per user in bytes (250 * users_opening)
    enabled: true
    gauge:
      value_type: int
    unit: "By"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_shared_pool_library_cache_reload_ratio:
    description: SGA shared pool library cache reload ratio (reloads/pins)
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_shared_pool_library_cache_hit_ratio:
    description: SGA shared pool library cache hit ratio for SQL AREA namespace
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_shared_pool_dict_cache_miss_ratio:
    description: SGA shared pool dictionary cache miss ratio (getmisses/gets)
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_log_buffer_space_waits:
    description: Number of sessions waiting for log buffer space
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_log_allocation_retries_ratio:
    description: SGA log allocation retries ratio (redo buffer allocation retries / redo entries)
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_hit_ratio:
    description: SGA hit ratio (session logical reads minus physical reads / session logical reads)
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_log_buffer_redo_allocation_retries:
    description: Number of redo buffer allocation retries from sysstat
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_log_buffer_redo_entries:
    description: Number of redo entries from sysstat
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sorts_memory:
    description: Number of sorts performed in memory from sysstat
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sorts_disk:
    description: Number of sorts performed on disk from sysstat
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_fixed_size_bytes:
    description: SGA fixed size memory in bytes
    enabled: true
    gauge:
      value_type: int
    unit: "By"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_redo_buffers_bytes:
    description: SGA redo buffers memory in bytes
    enabled: true
    gauge:
      value_type: int
    unit: "By"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.rollback_segments_gets:
    description: Number of gets on rollback segments
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.rollback_segments_waits:
    description: Number of waits on rollback segments
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.rollback_segments_wait_ratio:
    description: Rollback segments wait ratio (waits/gets)
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.redo_log_parallel_write_waits:
    description: Number of waits for log file parallel write events
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.redo_log_switch_completion_waits:
    description: Number of waits for log file switch completion events
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.redo_log_switch_checkpoint_incomplete_waits:
    description: Number of waits for log file switch (checkpoint incomplete) events
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.redo_log_switch_archiving_needed_waits:
    description: Number of waits for log file switch (archiving needed) events
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_buffer_busy_waits:
    description: Number of buffer busy waits events
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_free_buffer_waits:
    description: Number of free buffer waits events
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.sga_free_buffer_inspected_waits:
    description: Number of free buffer inspected waits events
    enabled: true
    gauge:
      value_type: int
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.active_parallel_sessions:
    description: Number of active parallel sessions in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.active_serial_sessions:
    description: Number of active serial sessions in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.average_active_sessions:
    description: Average number of active sessions in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.background_cpu_usage_per_second:
    description: Background CPU usage per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.background_time_per_second:
    description: Background time per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.cpu_usage_per_second:
    description: CPU usage per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.cpu_usage_per_transaction:
    description: CPU usage per transaction in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.current_logons:
    description: Current number of logons in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.current_open_cursors:
    description: Current number of open cursors in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.cpu_time_ratio:
    description: Database CPU time ratio in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.wait_time_ratio:
    description: Database wait time ratio in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.block_changes_per_second:
    description: DB block changes per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.block_changes_per_transaction:
    description: DB block changes per transaction in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.executions_per_second:
    description: Executions per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.executions_per_transaction:
    description: Executions per transaction in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.hard_parse_count_per_second:
    description: Hard parse count per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.hard_parse_count_per_transaction:
    description: Hard parse count per transaction in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.logical_reads_per_second:
    description: Logical reads per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.logical_reads_per_transaction:
    description: Logical reads per transaction in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.logons_per_transaction:
    description: Logons per transaction in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.network_traffic_byte_per_second:
    description: Network traffic volume per second in bytes in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "By/s"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.open_cursors_per_second:
    description: Open cursors per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.open_cursors_per_transaction:
    description: Open cursors per transaction in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.parse_failure_count_per_second:
    description: Parse failure count per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.physical_read_bytes_per_second:
    description: Physical read total bytes per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "By/s"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.physical_reads_per_transaction:
    description: Physical reads per transaction in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.physical_write_bytes_per_second:
    description: Physical write total bytes per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "By/s"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.physical_writes_per_transaction:
    description: Physical writes per transaction in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.redo_generated_bytes_per_second:
    description: Redo generated per second in bytes in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "By/s"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.redo_generated_bytes_per_transaction:
    description: Redo generated per transaction in bytes in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "By/s"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.response_time_per_transaction:
    description: Response time per transaction in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "s"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.session_count:
    description: Session count in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.soft_parse_ratio:
    description: Soft parse ratio in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.sql_service_response_time:
    description: SQL service response time in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "s"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.total_parse_count_per_second:
    description: Total parse count per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.total_parse_count_per_transaction:
    description: Total parse count per transaction in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.user_calls_per_second:
    description: User calls per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.user_calls_per_transaction:
    description: User calls per transaction in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.user_commits_per_second:
    description: User commits per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.user_commits_percentage:
    description: User commits percentage in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.user_rollbacks_per_second:
    description: User rollbacks per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.user_rollbacks_percentage:
    description: User rollbacks percentage in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.transactions_per_second:
    description: User transactions per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.execute_without_parse_ratio:
    description: Execute without parse ratio in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.logons_per_second:
    description: Logons per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.db_physical_read_bytes_per_second:
    description: Physical read bytes per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "By/s"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.db_physical_reads_per_second:
    description: Physical reads per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.db_physical_write_bytes_per_second:
    description: Physical write bytes per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "By/s"
    attributes:
      - newrelic.entity_name
      - instance.id

  newrelicoracledb.pdb.db_physical_writes_per_second:
    description: Physical writes per second in PDB
    enabled: true
    gauge:
      value_type: double
    unit: "1"
    attributes:
      - newrelic.entity_name
      - instance.id

tests:
  config:
  goleak:
    ignore:
      any:
      - "github.com/cihub/seelog.(*asyncLoopLogger).processQueue" # see https://github.com/cihub/seelog/issues/182
