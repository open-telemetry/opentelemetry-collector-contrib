receivers:
  otlp:
    protocols:
      grpc:
        endpoint: 0.0.0.0:4317
      http:
        endpoint: 0.0.0.0:4318

exporters:
  mqtt:
    connection:
      endpoint: tcp://localhost:1883
      auth:
        plain:
          username: test
          password: test
      connection_timeout: 10s
      keep_alive: 30s
      publish_confirmation_timeout: 5s
    topic:
      topic: telemetry/data/%{resource.attributes.host.name}
    qos: 1
    retain: false
    encoding_extension: otlp_encoding/otl

extensions:
  otlp_encoding/otl:
    protocol: otlp_json

service:
  extensions: [otlp_encoding/otl]
  pipelines:
    traces:
      receivers: [otlp]
      exporters: [mqtt]
    metrics:
      receivers: [otlp]
      exporters: [mqtt]
    logs:
      receivers: [otlp]
      exporters: [mqtt]